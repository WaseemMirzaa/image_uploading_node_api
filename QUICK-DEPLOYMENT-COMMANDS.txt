================================================================================
ğŸš€ 4 SECRETS WEDDING - QUICK DEPLOYMENT COMMANDS
================================================================================

ğŸ“‹ STEP 1: PUSH TO GITHUB (Run locally)
========================================

# Make scripts executable
chmod +x push-to-github.sh deploy-to-digitalocean.sh

# Push code to GitHub (without .env file)
./push-to-github.sh

# What this does:
# âœ… Protects .env file from being pushed
# âœ… Commits all code to GitHub
# âœ… Ensures Firebase credentials stay secure
# âœ… Creates .env.example template

================================================================================
ğŸ“‹ STEP 2: DEPLOY ON DIGITALOCEAN (Run on server)
==================================================

# SSH into your DigitalOcean server
ssh root@YOUR_SERVER_IP

# Download and run deployment script
curl -O https://raw.githubusercontent.com/WaseemMirzaa/four_wedding_app_cloud_function/main/deploy-to-digitalocean.sh
chmod +x deploy-to-digitalocean.sh
sudo ./deploy-to-digitalocean.sh

# What this does:
# ğŸ”§ Installs Node.js 18 and PM2
# ğŸ“¥ Clones repository from GitHub
# ğŸ“¦ Installs all dependencies
# ğŸ” Creates .env with Firebase credentials
# ğŸ”¥ Configures Firebase Admin SDK
# ğŸš€ Starts app with PM2 on port 3001 (Direct access, no nginx)
# ğŸ›¡ï¸ Configures firewall
# ğŸ§ª Tests deployment

================================================================================
ğŸ“‹ STEP 3: TEST DEPLOYMENT
===========================

# Health check
curl http://YOUR_SERVER_IP:3001/health

# Firebase status
curl http://YOUR_SERVER_IP:3001/api/notifications/status

# Test push notification
curl -X POST http://YOUR_SERVER_IP:3001/api/notifications/send \
  -H 'Content-Type: application/json' \
  -d '{"token":"YOUR_FCM_TOKEN","title":"Test","body":"Hello from DigitalOcean!"}'

# Test wedding invitation
curl -X POST http://YOUR_SERVER_IP:3001/api/notifications/wedding-invitation \
  -H 'Content-Type: application/json' \
  -d '{"token":"YOUR_FCM_TOKEN","inviterName":"Sarah & Michael","weddingDate":"2024-08-15"}'

================================================================================
ğŸ“‹ STEP 4: MANAGE APPLICATION
==============================

# View PM2 status
pm2 status

# View logs
pm2 logs 4secrets-wedding-api

# Restart application
pm2 restart 4secrets-wedding-api

# Stop application
pm2 stop 4secrets-wedding-api

# Update from GitHub
cd /var/www/4secrets-wedding-api
git pull origin main
npm install
pm2 restart 4secrets-wedding-api

================================================================================
ğŸ“± MOBILE APP CONFIGURATION
============================

# Update your Flutter app to use production server
const String API_BASE_URL = 'http://YOUR_SERVER_IP:3000';

# Test endpoints:
# - Health: $API_BASE_URL/health
# - Notifications: $API_BASE_URL/api/notifications/status
# - Email: $API_BASE_URL/api/email/status
# - Images: $API_BASE_URL/api/images

================================================================================
ğŸ”§ FIREBASE CONFIGURATION INCLUDED
===================================

âœ… Project ID: secrets-wedding
âœ… Service Account: firebase-adminsdk-fbsvc@secrets-wedding.iam.gserviceaccount.com
âœ… All Firebase credentials automatically configured
âœ… Real push notifications enabled
âœ… German wedding templates active

================================================================================
ğŸ¯ EXPECTED RESULTS
===================

After successful deployment:

âœ… Server running on port 3000 (Direct access, no nginx)
âœ… Firebase push notifications working
âœ… Email API functional
âœ… Image upload API working
âœ… PM2 process management active
âœ… Auto-restart on crashes
âœ… Firewall configured
âœ… Health monitoring active

Your 4 Secrets Wedding API will be live at:
http://YOUR_SERVER_IP:3000

Ready for mobile app integration! ğŸ””ğŸ’âœ¨

================================================================================
ğŸ†˜ TROUBLESHOOTING
==================

If something goes wrong:

1. Check PM2 status: pm2 status
2. View logs: pm2 logs 4secrets-wedding-api
3. Check Firebase: curl http://localhost:3000/api/notifications/status
4. Restart app: pm2 restart 4secrets-wedding-api
5. Check firewall: ufw status
6. Check port: netstat -tlnp | grep 3000

================================================================================
